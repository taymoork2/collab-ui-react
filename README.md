# Atlas Contribution Guide

## About

Take a moment to familiarize yourself with the following rules, guidelines, and contribution process.

Learn more about project specifics:
* [npm scripts](docs/npm-scripts.md)
* [setup](docs/setup.md)
* [structure](docs/structure.md)
* [technologies](docs/technology.md)
* [webpack](docs/webpack.md)

Post any questions to the 'Atlas UI Dev Team' Spark room. Contributors are expected to be actively engaged on Spark. If you need more help or access to a Spark room, please reach out to a [core team member](http://cs.co/atlas-triage#im-still-stuck-who-can-i-contact).

## Rules and Guidelines

These rules establish and enforce best practices
in order to improve code quality, maintainability, and readability.
All contributors are expected to take the time to learn and apply them.
Adherence is mandatory. Please refactor non-compliant code.

* **Unit tests are mandatory**.  Unit tests are the foundation of our testing strategy.
  They provide a way to test business logic and components in isolation while controlling all conditions and expectations.
  See the [examples](examples/unit) module for examples of different types of unit tests.
* **Code reviews are mandatory**. Code reviews are performend through GitHub's [Pull Requests](https://help.github.com/articles/using-pull-requests/).
  GitHub provides an easy-to-use tool for reviewing and maintaining commit history by linking commits
  with their associated pull requests.
* **Code style is mandatory**. Style should be enforced through linting and code reviews.
  * [Javascript Style Guide](https://github.com/airbnb/javascript/tree/master/es5)
  * [Angular Style Guide](https://github.com/johnpapa/angular-styleguide/tree/master/a1)
  * [Angular's Git Commit Guidelines](https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#commit)
* **Build failure triage is mandatory**. When you push code that breaks the builds, you are responsible to investigate
  and triage this failure before attempting another push. More info on the [triage wiki](http://cs.co/atlas-triage).

## Contributing

1. Setup your repository
  * `git clone git@sqbu-github.cisco.com:WebExSquared/wx2-admin-web-client.git`
  * `origin` should be the above WebExSquared repo (`git remote -v` to see remote details)
  * See [Git Workflows](docs/git-workflows.md) for alternative detail on how to manage your git repository.
2. Run the application
  * `npm install` to install project dependencies
  * `npm start` to run the development server
  * See [npm scripts](docs/npm-scripts.md) for more build commands
2. Make your feature change or bug fix
  * Create a local branch (tracking origin/master) to implement your work
    * `git checkout -b <local-branch> origin/master`
  * Example [Hello World module](docs/hello-world.md)
  * Example components
    * [example.module.js](examples/unit/example.module.js)
    * [example.directive.js](examples/unit/example.directive.js)
    * [example.controller.js](examples/unit/example.controller.js)
    * [example.service.js](examples/unit/example.service.js)
    * [example.tpl.html](examples/unit/example.tpl.html)
3. Create your unit tests
  * `npm test` or `npm run test` to run unit tests
  * Example components
    * [example.directive.spec.js](examples/unit/example.directive.spec.js)
    * [example.controller.spec.js](examples/unit/example.controller.spec.js)
    * [example.service.spec.js](examples/unit/example.service.spec.js)
    * [example.tpl.spec.js](examples/unit/example.tpl.spec.js)
4. Analyze code coverage
  * Generated by every unit test karma run
  * View your own report in the `test/coverage` directory
  * Jenkins also publishes [Coverage Report](https://sqbu-jenkins.cisco.com:8443/job/team/job/atlas/job/atlas-web/cobertura) for every build
5. Create End-to-End test
  * `npm run protractor` to run protractor e2e tests
  * e2e tests are organized by [modules](test/e2e-protractor)
    * Only add e2e tests for critical, happy-path workflows
  * Protractor elements are abstracted into [Page Objects](test/e2e-protractor/pages)
  * All element interactions are implemented through [Util functions](test/e2e-protractor/utils/test.utils.js)
6. Create Pull Request code review
  * `git checkout <local-branch>` (if not already on your local branch)
  * Before creating a pull request, update your local branch (tracking origin/master) to the latest remote code
  * `git pull --rebase`
  * Push your updated local branch to your fork
  * `git push <fork> <local-branch>`
  * On your fork, select your branch and click `Pull request` to create a new PR
  * Add appropriate reviewers using [@mention](https://github.com/blog/821-mention-somebody-they-re-notified)
    * Add `@WebExSquared/atlas-web-jedi` for core team members if needed
  * Respond to feedback and push new commits if necessary
7. Push to Jenkins for validated merge (after approved review)
  * [Jenkins Validated Merge](https://sqbu-jenkins.cisco.com:8443/job/team/job/atlas/job/atlas-web/repo.git/)
    * `git remote add jenkins ssh://<userid>@sqbu-jenkins.cisco.com:2022/team/atlas/atlas-web`
  * `git checkout master`
  * Your master branch should have no local commits. Reset your HEAD if need be.
  * `git pull --rebase` to update your master branch with the latest from github
  * `git merge <local-branch>` (resolve conflicts if necessary)
  * `git push jenkins master`
8. Jenkins Build Triage
  * Build failures happen - sometimes they are related to your work and sometimes they aren't
  * All contributors are required to triage their failure to a root cause
  * A GitHub Issue (GHI) will be created with failure details and you will be notified on Spark how to triage
  * [Atlas Triage Wiki](http://cs.co/atlas-triage)
