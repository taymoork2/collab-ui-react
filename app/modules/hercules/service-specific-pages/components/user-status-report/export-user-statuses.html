<div class="modal-header">
  <button type="button" class="close" ng-click="exportUserStatusesCtrl.cancelExport();$dismiss()" aria-label="{{::'common.close' | translate}}"></button>
  <h4 class="modal-title" translate="hercules.export.modalTitle"></h4>
</div>

<div class="modal-body" ng-if="!exportUserStatusesCtrl.ussCacheIsEmpty()">
  <p><span translate="hercules.export.modalText1"></span> <span translate="hercules.export.modalText2"></span></p>
  <form name="userStatusesExport" class="userStatusesExport-form">
    <div class="cs-checkbox-group" ng-repeat="(serviceIndex, service) in exportUserStatusesCtrl.statusTypes">
      <h5 translate="{{'hercules.cloudExtensions.serviceNames.'+service[0].id}}"></h5>
      <div ng-repeat="(itemIndex, item) in service">
        <input
          cs-input
          type="checkbox"
          id="{{'ckid_' + item.id + '_' + item.stateType}}"
          name="{{item.stateType}}"
          ng-disabled="item.unselectable || exportUserStatusesCtrl.exportingUserStatusReport"
          ng-model="exportUserStatusesCtrl.statusTypes[serviceIndex][itemIndex].selected"
          cs-input-label="{{item.text}}: {{item.count}}">
      </div>
    </div>
  </form>
  <p ng-if="!exportUserStatusesCtrl.exportingUserStatusReport"><strong translate="hercules.export.modalNote"></strong></p>
  <div ng-if="exportUserStatusesCtrl.exportingUserStatusReport">
    <div class="progressbar-info export-user-statuses-progress-info">
      <span class="progressbar-label">{{exportUserStatusesCtrl.progress.message}}</span>
      <span class="progressbar-progress" ng-if="exportUserStatusesCtrl.progress.current > 0">{{exportUserStatusesCtrl.progress.current}} / {{exportUserStatusesCtrl.progress.total}}</span>
      <span class="progressbar-progress" ng-if="exportUserStatusesCtrl.progress.current === 0" translate="hercules.export.pleaseWait"></span>
    </div>
    <progressbar max="exportUserStatusesCtrl.progress.total" value="exportUserStatusesCtrl.progress.current"></progressbar>
  </div>
</div>
<div class="modal-body" ng-if="exportUserStatusesCtrl.ussCacheIsEmpty()">
  <p><span translate="hercules.export.noUsersFound"></span> <span translate="common.ifErrorRemains"></span></p>
</div>

<div class="modal-footer">
  <button
    class="btn"
    ng-click="exportUserStatusesCtrl.cancelExport();$dismiss()"
    translate="common.close">
  </button>
  <button
    cs-btn
    ng-disabled="exportUserStatusesCtrl.nothingToExport() || exportUserStatusesCtrl.exportingUserStatusReport"
    class="btn btn--primary"
    ng-click="exportUserStatusesCtrl.exportCSV()">
      <span translate="hercules.export.modalCTA"></span>
  </button>
</div>
