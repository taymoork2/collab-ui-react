<cs-sp-container>

  <cs-sp-section>
    <div class="section-name" style="padding: 15px 0;">
      {{service.display_name}}
    </div>

    <!-- connectors -->
    <div class="feature-list">
      <ul>
        <div ng-repeat="connector in service.connectors">
          <li class="feature" ng-class="{'list-item': !$first}">
            <a ui-sref="cluster-details.hosts({clusterId: cluster.id, hostSerial: connector.host.serial})">
              <i class="fa fa-circle status-icon" ng-class="connector.status"/>
              <span class="feature-name">{{connector.host.host_name}}</span>
              <span class="feature-status" translate="{{'hercules.status.' + (connector.state || 'unknown') }}"></span>
              <i class="feature-arrow"></i>
            </a>
          </li>
          <li class="clearfix status-info">
            Version: {{connector.version}}. <span ng-show="connector.software_upgrade_pending" class="feature-status">Pending software upgrade to {{connector.software_upgrade_pending}}.</span>
          </li>
        </div>
      </ul>
    </div>
    <div ng-hide="service.connectors.length" class="feature-list">
      <ul>
        <li class="feature">
          <i class="fa fa-circle status-icon disabled" />
          <span>Not installed on any hosts.</span>
        </li>
      </ul>
    </div>

  </cs-sp-section>

  <!-- connectors -->
  <cs-sp-section ng-show="service.needs_attention && service.alarm_count">
    <div ng-repeat="connector in service.connectors">

      <!-- connector alarms -->
      <div ng-show="{{connector.alarms.length}}">
        <div class="clearfix" style="padding: 15px 0 5px 0; font-weight: bold;">
          <span style="color: #f05d3b">{{connector.host.host_name}}</span>
          <span ng-show="connector.alarms.length == 1">has reported {{connector.alarms.length}} alarm:</span>
          <span ng-hide="connector.alarms.length == 1">has reported {{connector.alarms.length}} alarms:</span>
        </div>

        <div ng-repeat="alarm in connector.alarms" style="padding-bottom: 5px;" class="clearfix">
          <span ng-class="alarm.severity == 'error' ? 'red' : 'yellow'" style="text-transform: capitalize;">{{alarm.severity}}:</span>
          <span>{{alarm.title}}.</span>
          <span>{{alarm.description}}</span>
        </div>

        <a target="_blank" ng-href="https://{{connector.host.host_name}}/alarms" class="btn btn--primary" style="color: white; padding-bottom: 5px;">
          Go to Host
        </a>

      </div>
    </div>
  </cs-sp-section>

  <!-- sw upgrade -->
  <cs-sp-section ng-show="service.software_upgrade_available">
    <div class="section-name" style="padding: 15px 0;">
      Software Upgrade
    </div>

    <hercules-software-upgrade />

  </cs-sp-section>

</cs-sp-container>
