<div ng-form="companyVoicemailForm">
  <label class="sub-section__label" translate="serviceSetupModal.companyVoicemail"></label>
  <cs-toggle-switch
    ng-model="$ctrl.companyVoicemailEnabled"
    toggle-id="companyVoicemailToggle"
    name="companyVoicemailToggle"
    size="small"
    cs-change="$ctrl.onCompanyVoicemailChange(toggleValue)"
    cs-aria-label="{{::'serviceSetupModal.companyVoicemail' | translate}}">
  </cs-toggle-switch>
  <div ng-if="$ctrl.companyVoicemailEnabled" class="cs-checkbox-group save-popup-margin">
    <input
      cs-input
      type="checkbox"
      ng-model="$ctrl.externalVoicemailAccess"
      id="externalVoicemailAccess"
      name="externalVoicemailAccess"
      ng-change="$ctrl.onExternalVoicemailAccessChanged()"
      cs-input-label="{{::'serviceSetupModal.externalVoicemailAccessLabel' | translate}}">
    <div ng-if="$ctrl.externalVoicemailAccess" class="indent-area-code">
      <p
        class="description-block"
        translate="serviceSetupModal.externalNumberDescriptionText">
      </p>
      <div class="medium-5 external-voicemail-number">
        <cs-select
          name="companyVoicemailNumber"
          ng-model="$ctrl.selectedNumber"
          options="$ctrl.externalNumberOptions"
          input-placeholder="$ctrl.filterPlaceholder"
          on-change-fn="$ctrl.onCompanyVoicemailNumberChanged()"
          is-warn="{{$ctrl.missingDirectNumbers}}"
          warn-msg="{{::'serviceSetupModal.voicemailNoDirectNumbersError' | translate}}"
          required="true"
          filter="true"
          refresh-data-fn="$ctrl.getNumbers(filter)">
        </cs-select>
        <p
          class="help-block"
          ng-if="!$ctrl.missingDirectNumbers"
          translate="serviceSetupModal.voicemailPilotHelpText">
        </p>
      </div>
    </div>
    <input
      cs-input
      type="checkbox"
      ng-model="$ctrl.voicemailToEmail"
      id="voicemailToEmail"
      name="voicemailToEmail"
      ng-change="$ctrl.onVoicemailToEmailChanged()"
      cs-input-label="{{::'serviceSetupModal.voicemailToEmailLabel' | translate}}"
      cs-input-help-text="{{::'serviceSetupModal.voicemailToEmailHelpText' | translate}}">
  </div>
</div>
