<div class="device-card">
  <div style="display: flex; align-items: center;">
    <i
      ng-if="device.type != 'group' && device.needsActivation"
      class="icon icon-3x icon-circle-unlock"
    />
    <i
      ng-if="device.type != 'group' && !device.needsActivation"
      class="icon icon-3x icon-circle-telepresence"
    />
    <i
      ng-if="device.type == 'group'"
      class="icon icon-3x icon-circle-group"
    />
    <i
      class="overlay"
      ng-if="device.type != 'group' && !device.needsActivation"
      ng-class="device.cssColorClass"
    />
    <div class="ellipsis card-items">
      <h4 class="ellipsis" ng-bind-html="device.displayName | highlight:devices.search"></h4>
      <div ng-switch on="device.type">
        <div ng-switch-when="group">
          <!-- group -->
          <div class="ellipsis">
            {{device.count}} devices
          </div>
        </div>
        <div ng-switch-default>
          <div class="ellipsis" ng-if="devices.search && !device.needsActivation">
            <!-- search -->
            <span ng-if="device.filterMatch != 'diagnosticsEvent' && device.filterMatch != 'product'">
              {{devices.deviceProps[device.filterMatch || 'readableState']}}:
            </span>
            <span ng-bind-html="device[device.filterMatch || 'readableState'] | highlight:devices.search"></span>
          </div>
          <div class="ellipsis" ng-if="!devices.search && !device.needsActivation">
            <!-- no search -->
            <span ng-if="device.hasIssues">
              {{device.diagnosticsEvents[0].type || device.product}}
            </span>
            <span ng-if="!device.hasIssues">
              {{device.product}}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
