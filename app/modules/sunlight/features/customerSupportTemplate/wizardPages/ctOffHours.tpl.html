<div>
  <div class="ct-title">
    <span class="h3">{{careSetupAssistant.getLocalisedText('careChatTpl.offHours')}}</span>
  </div>
  <div class="h5 ct-title-desc" translate="careChatTpl.offHoursDesc"></div>
  <div class="cs-card-container ct-sa-content ct-offhours">
    <cs-card-layout block-view="true" class="ct-card-center">
      <cs-card class="ct-card">
        <div class="h4 ct-card-info" translate="careChatTpl.preview"></div>
        <article class="offhours-preview ct-article">
          <section>
            <div class="offhours-icon">
              <i class="icon icon-clock"></i>
            </div>
            <div class="h5 offhours-preview-message">{{careSetupAssistant.template.configuration.pages.offHours.message}}</div>
            <div ng-if="!careSetupAssistant.isBusinessHoursDisabled" class="business-hours">
              <div class="h5 message" translate="careChatTpl.businessHours"></div>
              <div class="h6">{{careSetupAssistant.scheduleTimeZone.label}}</div>
              <div class="h6 day-time-preview days" ng-model="careSetupAssistant.daysPreview">{{careSetupAssistant.daysPreview}}</div>
              <div class="h6 day-time-preview" ng-if="careSetupAssistant.template.configuration.pages.offHours.schedule.open24Hours" translate="careChatTpl.open24Hours"></div>
              <div class="h6 day-time-preview" ng-if="!careSetupAssistant.template.configuration.pages.offHours.schedule.open24Hours">
                <span>{{careSetupAssistant.timings.startTime.label}} - </span>
                <span>{{careSetupAssistant.timings.endTime.label}}</span>
              </div>
            </div>
            <button type="button" class="no-click offhours-closebtn" ng-class="{ 'no-business-hours': careSetupAssistant.isBusinessHoursDisabled }" translate="common.close" tabindex="-1"></button>
          </section>
        </article>
      </cs-card >
      <cs-card class="ct-card">
        <div class="h4 ct-card-info" translate="careChatTpl.attributes"></div>
        <article class="off-hours-attributes ct-article">
          <section>
            <div class="offhours-message">
              <div class="h4 message-label" translate="careChatTpl.offHoursMessage"></div>
              <textarea cs-input type="text"
                class="h6 message-area"
                id="offHoursTextArea"
                ng-maxlength="careSetupAssistant.lengthConstants.multiLineMaxCharLimit"
                validate-characters="careSetupAssistant.InvalidCharacters"
                cs-input-messages="careSetupAssistant.multiLineValidationMessage"
                ng-model="careSetupAssistant.template.configuration.pages.offHours.message"
                ng-model-options="{ allowInvalid: true }" name="offHoursMessage"
                ng-class="{'no-message': !careSetupAssistant.isOffHoursMessageValid}"
                placeholder="{{::'careChatTpl.offHoursDefaultMessage' | translate}}"/>
              </textarea>
            </div>

            <div>
              <div class="h4 business-hours-message" translate="careChatTpl.businessHours"></div>
              <div class="day-picker">
                <div class="day"
                  ng-repeat="dayObj in careSetupAssistant.days"
                  ng-class="{ 'day-selected': dayObj.isSelected, 'day-unselected': !dayObj.isSelected }"
                  ng-click="careSetupAssistant.setDay($index)"
                  aria-label="{{::dayObj.label}}">{{::dayObj.day}}</div>
              </div>
              <div class="small ct-input-error" ng-show="!careSetupAssistant.isBusinessDaySelected">
                <div class="ct-error-icon"><i class="icon icon-error icon-lg"></i></div>
                <div>{{:: 'careChatTpl.ctValidation.businessDaysSelection' | translate}}</div>
              </div>
              <div class="time-and-timezone-picker">
                <cs-checkbox class="h5"
                  ckid="ctOpen24Hours"
                  isdisabled="careSetupAssistant.isBusinessHoursDisabled"
                  ng-model="careSetupAssistant.template.configuration.pages.offHours.schedule.open24Hours"
                  label="{{:: 'careChatTpl.open24Hours' | translate}}"></cs-checkbox>
                <div ng-if="!careSetupAssistant.template.configuration.pages.offHours.schedule.open24Hours && !careSetupAssistant.isBusinessHoursDisabled">
                  <div class="time-picker">
                    <div class="start-time">
                      <div class="h5" translate="careChatTpl.offHoursStartTime"></div>
                      <cs-select class="time"
                        labelfield="label"
                        valuefield="value"
                        ng-model="careSetupAssistant.timings.startTime"
                        options="careSetupAssistant.startTimeOptions"
                        on-change-fn="careSetupAssistant.setEndTimeOptions()"></cs-select>
                    </div>
                    <div class="end-time">
                      <div class="h5" translate="careChatTpl.offHoursEndTime"></div>
                      <cs-select class="time"
                        labelfield="label"
                        valuefield="value"
                        ng-model="careSetupAssistant.timings.endTime"
                        options="careSetupAssistant.endTimeOptions"></cs-select>
                    </div>
                  </div>
                </div>
                <div ng-if="!careSetupAssistant.isBusinessHoursDisabled">
                  <div class="timezone-picker">
                    <div class="h5" translate="careChatTpl.offHoursTimeZone"></div>
                    <cs-select
                      labelfield="label"
                      valuefield="value"
                      filter="true"
                      name="businessHours-timezonePicker"
                      ng-model="careSetupAssistant.scheduleTimeZone"
                      options="careSetupAssistant.timezoneOptions"
                      placeholder="'Select a timezone'"></cs-select>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </article>
      </cs-card >
    </cs-card-layout>
  </div>
</div>
