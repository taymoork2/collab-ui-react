#!/bin/bash

function abort {
    >&2 echo "Aborting '$(basename "$0")' $*"
    exit 1
}

function get_physical_path {
    local dir=${1}
    if [ ! -d "${dir}" ]; then
        >&2 echo "Error: get_physical_path: invalid path ${dir}"
        return 1
    fi

    # shellcheck disable=SC2164
    cd "${dir}"
    pwd -P
    # shellcheck disable=SC2164
    cd ~-
}

function print_error_required_param_missing {
    local missing_param_name="$1"
    echo_error "${FUNCNAME[1]}: missing param '$missing_param_name'"
}

function abort_required_env_var_missing {
    local missing_env_var="$1"
    echo_error "'$missing_env_var' is not set, please export this environment variable first."
    exit 1
}

function echo_error {
    >&2 echo "[ERROR]" "$@"
}

function echo_warn {
    >&2 echo "[WARNING]" "$@"
}

function echo_info {
    >&2 echo "[INFO]" "$@"
}

# note:
# - this function expects banner contents to be piped in
#
#   ```
#   # e.g. cat contents of './foo'
#   cat ./foo | print_notice_banner
#
#   # e.g. cat heredoc contents
#   cat << _EOF | print_notice_banner
#   hello world.
#   _EOF
#   ```
# TODO: refactor this out of '.githooks/pre-rebase/include/pre-rebase-helpers'
function print_notice_banner {
    echo ""
    echo "********************************** ATTENTION ***********************************"
    echo ""
    cat
    echo ""
    echo "********************************************************************************"
    echo ""
}
